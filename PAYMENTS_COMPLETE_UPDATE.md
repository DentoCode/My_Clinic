# ุชุญุฏูุซ ุดุงูู ูุฌุฒุฆูุฉ ุงููุฏููุนุงุช ๐

## ๐ฏ ุงููุฏู
ุชุทููุฑ ูุชุญุณูู ุฌุฒุฆูุฉ ุงููุฏููุนุงุช ูุชุตุจุญ ุฃูุซุฑ ุชูุตููุงู ูุณูููุฉ ูู ุงูุงุณุชุฎุฏุงู ูุน ุฅููุงููุงุช ูุชูุฏูุฉ ููููุชุฑุฉ ูุงูุชุชุจุน.

## โ ุงูููุฒุงุช ุงููุถุงูุฉ

### 1๏ธโฃ ูุงุฌูุฉ ูุณุชุฎุฏู ูุญุณูุฉ
- **ุนุฑุถ ุงูุชูุงุตูู ุงููุชูุณุนุฉ**: ุงุณุชุฎุฏุงู ExpansionTile ูุนุฑุถ ุชูุงุตูู ุงูุฏูุนุฉ
- **ุฅุญุตุงุฆูุงุช ูุจุงุดุฑุฉ**: ุนุฑุถ ุงูุฅุฌูุงูู ูุนุฏุฏ ุงููุฏููุนุงุช ูู ุงูุฃุนูู
- **ุฑุณุงุฆู ุฎุงููุฉ ูู ุงูุจูุงูุงุช**: ุนุฑุถ ุฑุณุงูุฉ ุฌูููุฉ ุนูุฏ ุนุฏู ูุฌูุฏ ูุฏููุนุงุช

### 2๏ธโฃ ูุธุงู ุงูููุชุฑุฉ ุงููุชูุฏู
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  [ุงููู(3)]  [ููุชูู(2)]  [ูุนูู(1)]   โ
โ  [ููุบู(0)]                           โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```
- ููุชุฑ ุญุณุจ ุญุงูุฉ ุงูุฏูุน (ููุชููุ ูุนููุ ููุบู)
- ุนุฑุถ ุนุฏุฏ ุงูุฏูุนุงุช ููู ุญุงูุฉ
- ุชุญุฏูุซ ููุฑู ูููุงุฆูุฉ ูุงูุฅุฌูุงูู

### 3๏ธโฃ ุฃููููุงุช ูุฃููุงู ุฏููุงููููุฉ

| ุทุฑููุฉ ุงูุฏูุน | ุงูููู | ุงูุฃููููุฉ | ุงูุฑูุฒ |
|-----------|-------|---------|------|
| ููุฏู | ุฃุฎุถุฑ๐ข | ๐ฐ | monetization_on |
| ุจุทุงูุฉ ุงุฆุชูุงู | ุฃุฒุฑู๐ต | ๐ณ | credit_card |
| ุชุญููู ุจููู | ุจููุณุฌู๐ฃ | ๐ฆ | account_balance |
| ุดูู | ููุฑูุงู๐ | ๐ | receipt |

**ุดุงุฑุงุช ุงูุญุงูุฉ:**
- โ ููุชูู (ุฃุฎุถุฑ) - check_circle
- โฑ๏ธ ูุนูู (ุจุฑุชูุงูู) - schedule
- โ ููุบู (ุฃุญูุฑ) - cancel

### 4๏ธโฃ ุญูุงุฑ ุฅุถุงูุฉ/ุชุนุฏูู ูุชูุฏู

#### ุงูุญููู ุงูุฃุณุงุณูุฉ:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ุงุฎุชุฑ ุงููุฑูุถ      [โผ dropdown] โ
โ ุงููุจูุบ            [_________]โ
โ ุทุฑููุฉ ุงูุฏูุน       [โผ dropdown] โ
โ ุญุงูุฉ ุงูุฏูุน        [โผ dropdown] โ
โ ุงูุชุงุฑูุฎ           [๐ picker] โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### ุงูุญููู ุงููุดุฑูุทุฉ (Conditional Fields):
```
ุฅุฐุง ูุงูุช ุทุฑููุฉ ุงูุฏูุน = "ุจุทุงูุฉ ุงุฆุชูุงู"
โโ ููุน ุงูุจุทุงูุฉ [โผ Visa/MasterCard/Amex/Others]

ุฅุฐุง ูุงูุช ุทุฑููุฉ ุงูุฏูุน = "ุดูู"
โโ ุฑูู ุงูุดูู [_________]

ุฅุฐุง ูุงูุช ุทุฑููุฉ ุงูุฏูุน = "ุชุญููู ุจููู"
โโ ูุฑุฌุน ุงูุชุญููู [_________]

ูู ุฌููุน ุงูุญุงูุงุช
โโ ุฑูู ุงูุฅูุตุงู [_________] (ุงุฎุชูุงุฑู)
โโ ุงูููุงุญุธุงุช [_________] (ุงุฎุชูุงุฑู)
```

### 5๏ธโฃ ุนูููุงุช CRUD ูุงููุฉ

**Create (ุฅูุดุงุก):**
- ุฅุถุงูุฉ ุฏูุนุฉ ุฌุฏูุฏุฉ ุนุจุฑ ุญูุงุฑ ุงูุฅุถุงูุฉ
- ูุน UUID ุชููุงุฆู ูููุนุฑูู
- ุญูุธ ูู Hive ุชููุงุฆูุงู

**Read (ูุฑุงุกุฉ):**
- ุนุฑุถ ุฌููุน ุงูุฏูุนุงุช
- ููุชุฑุฉ ุญุณุจ ุงูุญุงูุฉ
- ููุชุฑุฉ ุญุณุจ ุงููุฑูุถ (ูุฑูุจุงู)

**Update (ุชุนุฏูู):**
- ุชุนุฏูู ุฃู ุฏูุนุฉ ููุฌูุฏุฉ
- ุชุญุฏูุซ `updatedAt` ุชููุงุฆูุงู
- ุญูุธ ุงูุชุญุฏูุซุงุช ููุฑุงู

**Delete (ุญุฐู):**
- ุญุฐู ุฏูุนุฉ ูุน ุชุฃููุฏ
- ุฅุฒุงูุฉ ูู Hive ููุฑุงู
- ุชุญุฏูุซ ุงูุดุงุดุฉ ุชููุงุฆูุงู

### 6๏ธโฃ ุนุฑุถ ุงูุชูุงุตูู

ุนูุฏ ุชูุณูุน ุฏูุนุฉุ ูุชู ุนุฑุถ:
```
โโ ุงูุชุงุฑูุฎ:        yyyy/MM/dd HH:mm
โโ ุทุฑููุฉ ุงูุฏูุน:    ููุฏู/ุจุทุงูุฉ/ุชุญููู/ุดูู
โโ ููุน ุงูุจุทุงูุฉ:    (ุงุฎุชูุงุฑู)
โโ ุฑูู ุงูุดูู:      (ุงุฎุชูุงุฑู)
โโ ูุฑุฌุน ุงูุชุญููู:   (ุงุฎุชูุงุฑู)
โโ ุฑูู ุงูุฅูุตุงู:    (ุงุฎุชูุงุฑู)
โโ ุงูุญุงูุฉ:         ููุชูู/ูุนูู/ููุบู
โโ ุงููุจูุบ:         (ูููุฒ ุจุฎูููุฉ ุจุฑุชูุงููุฉ)
โโ ุงูููุงุญุธุงุช:      (ุงุฎุชูุงุฑู)
```

## ๐ ุงููููุงุช ุงููุญุฏุซุฉ

### 1. `payments_screen.dart` (730 ุณุทุฑ)
**ูุง ุชู ุฅุถุงูุชู:**
- ุฅุนุงุฏุฉ ุจูุงุก ุงููุงุฌูุฉ ุจุงููุงูู
- ูุฆุฉ ุฌุฏูุฏุฉ: `_AddPaymentDialog` ููุฅุถุงูุฉ ูุงูุชุนุฏูู
- ุทุฑู ูุญุณูุฉ: `_buildStatusChip`, `_buildStatusBadge`, `_buildDetailRow`
- ุฏุนู ุงูุฃููุงู ูุงูุฃููููุงุช ุงูุฏููุงููููุฉ
- ูุธุงู ุงูููุชุฑุฉ ุงููุชูุฏู

**ุงููุฆุงุช:**
```dart
PaymentsScreen                  // Stateful Widget ููุดุงุดุฉ ุงูุฑุฆูุณูุฉ
_PaymentsScreenState            // ุญุงูุฉ ุงูุดุงุดุฉ ุงูุฑุฆูุณูุฉ
_AddPaymentDialog               // Stateful Widget ููุญูุงุฑ
_AddPaymentDialogState          // ุญุงูุฉ ุงูุญูุงุฑ
```

### 2. `database_helper.dart`
**ูุง ุชู ุฅุถุงูุชู:**
```dart
Future<void> updatePayment(Payment payment) async { ... }
```
- ุฏุนู ุชุญุฏูุซ ุงูุฏูุนุงุช ุงูููุฌูุฏุฉ

### 3. `models/payment.dart`
**ุงูุญููู ุงููุฏุนููุฉ:**
```dart
โ id                    // ูุนุฑูู ูุฑูุฏ
โ patientId             // ุงููุฑูุถ ุงููุฑุชุจุท
โ treatmentId           // (ุงุฎุชูุงุฑู) ุงูุนูุงุฌ ุงููุฑุชุจุท
โ amount                // ุงููุจูุบ ุงููุฏููุน
โ date                  // ุชุงุฑูุฎ ุงูุฏูุน
โ paymentMethod         // ููุฏู/ุจุทุงูุฉ/ุชุญููู/ุดูู
โ cardType              // (ุงุฎุชูุงุฑู) ููุน ุงูุจุทุงูุฉ
โ checkNumber           // (ุงุฎุชูุงุฑู) ุฑูู ุงูุดูู
โ transferReference     // (ุงุฎุชูุงุฑู) ูุฑุฌุน ุงูุชุญููู
โ paymentStatus         // ููุชูู/ูุนูู/ููุบู
โ receiptNumber         // (ุงุฎุชูุงุฑู) ุฑูู ุงูุฅูุตุงู
โ notes                 // (ุงุฎุชูุงุฑู) ููุงุญุธุงุช
โ createdAt             // ุชุงุฑูุฎ ุงูุฅูุดุงุก
โ updatedAt             // (ุงุฎุชูุงุฑู) ุชุงุฑูุฎ ุขุฎุฑ ุชุญุฏูุซ
```

## ๐ง ุงูุชุญูู ูู ุงูุฃุฎุทุงุก

```bash
# ูุง ุชูุฌุฏ ุฃุฎุทุงุก ูู ุงูููุฏ
flutter analyze  # โ ุฌููุน ุงููููุงุช ุตุญูุญุฉ

# ุนุฏู ูุฌูุฏ ูุดุงูู ูู ุงูููุฏ
flutter format --set-exit-if-changed lib/screens/payments_screen.dart
```

## ๐ ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน

### ุฅุถุงูุฉ ุฏูุนุฉ
1. ุงููุฑ (+) ูู ุงูู AppBar
2. ุงุฎุชุฑ ูุฑูุถุงู ูุงููุจูุบ
3. ุงุฎุชุฑ ุทุฑููุฉ ุงูุฏูุน
4. ุฃููู ุงูุจูุงูุงุช ุงููุทููุจุฉ
5. ุงููุฑ "ุญูุธ"

### ููุชุฑุฉ ุงูุฏูุนุงุช
1. ุงููุฑ ุนูู ุฃุญุฏ ุฃุฒุฑุงุฑ ุงูููุชุฑุฉ
2. ูุชุญุฏุซ ุงูุนุฑุถ ููุฑุงู
3. ูุชุญุฏุซ ุงูุฅุฌูุงูู ูุงูุนุฏุฏ

### ุนุฑุถ ุงูุชูุงุตูู
1. ุงููุฑ ุนูู ุฏูุนุฉ ูู ุงููุงุฆูุฉ
2. ุชุชูุณุน ูุนุฑุถ ุงูุชูุงุตูู
3. ุงููุฑ ุงูุณูู ูุทููุง

### ุชุนุฏูู ุฏูุนุฉ
1. ุงูุชุญ ุงูุชูุงุตูู
2. ุงููุฑ "ุชุนุฏูู"
3. ุบูุฑ ุงูุจูุงูุงุช
4. ุงููุฑ "ุญูุธ"

### ุญุฐู ุฏูุนุฉ
1. ุงูุชุญ ุงูุชูุงุตูู
2. ุงููุฑ "ุญุฐู"
3. ุฃูุฏ ุงูุญุฐู
4. ุชูุญุฐู ุงูุฏูุนุฉ ููุฑุงู

## ๐ ุงูุฅุญุตุงุฆูุงุช

ูุชู ุนุฑุถ:
- **ุฅุฌูุงูู ุงููุฏููุนุงุช**: ูุฌููุน ุฌููุน ุงููุฏููุนุงุช (ุฃู ุงููููุชุฑุฉ)
- **ุนุฏุฏ ุงููุฏููุนุงุช**: ุนุฏุฏ ุงูุฏูุนุงุช (ุฃู ุงููููุชุฑุฉ)
- **ุชูุฒูุน ุญุณุจ ุงูุญุงูุฉ**: ูู ุฃุฒุฑุงุฑ ุงูููุชุฑุฉ

## ๐จ ุงูุชุตููู

### ุงูุฃููุงู ุงููุณุชุฎุฏูุฉ:
```
ุฃุฒุฑุงุฑ ุงูููุชุฑุฉ ุงููุฎุชุงุฑุฉ:    Colors.orange.shade700
ุฎูููุฉ ุงููุจูุบ:              Colors.orange.shade50
ุงูุญุงูุฉ ููุชูู:              Colors.green
ุงูุญุงูุฉ ูุนูู:              Colors.orange
ุงูุญุงูุฉ ููุบู:              Colors.red
```

### ุงููููุชุงุช:
```
ุงููู:                      16px
ุงูุฅุฌูุงูู/ุงูุนุฏุฏ:           24px
ุงุณู ุงููุฑูุถ:               14px Bold
ุฑูู ุงูุฅูุตุงู:              13px
```

## ๐ ุงูุฃูุงู ูุงูุชุญูู

- โ ุงูุชุญูู ูู ููุก ุฌููุน ุงูุญููู ุงููุทููุจุฉ
- โ ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูู ุฌููุน ุงูุนูููุงุช
- โ ุญูุธ ุงูุจูุงูุงุช ูู Hive ุจุดูู ุขูู
- โ ุชุฃููุฏ ูุจู ุงูุญุฐู
- โ ูุนุงูุฌุฉ ุงููุตูุต ุงูุนุฑุจูุฉ ุจุดูู ุตุญูุญ

## ๐ ุงูููุงุญุธุงุช

1. **ุงูุจูุงูุงุช ุงููุดุฑูุทุฉ**: ุงูุญููู ุงูุฅุถุงููุฉ ุชุธูุฑ ููุท ุนูุฏ ุงุฎุชูุงุฑ ุทุฑููุฉ ุฏูุน ูุนููุฉ
2. **ุงูุชุญุฏูุซ ุงูููุฑู**: ุฌููุน ุงูุชุบููุฑุงุช ุชูุญุฏุซ ุงูุดุงุดุฉ ููุฑุงู
3. **ุงูุชุฎุฒูู ุงูุฏุงุฆู**: ุฌููุน ุงูุจูุงูุงุช ุชูุญูุธ ุชููุงุฆูุงู ูู Hive
4. **ุณูููุฉ ุงูุงุณุชุฎุฏุงู**: ูุงุฌูุฉ ุจุฏูููุฉ ูุณููุฉ ุงูุชููู

## ๐ฏ ุงูุฎุทูุงุช ุงูุชุงููุฉ

- [ ] ุฅุถุงูุฉ ุชูุงุฑูุฑ ุงูุฏูุน ุงูููุตูุฉ
- [ ] ุทุจุงุนุฉ ุงูุฅูุตุงูุงุช
- [ ] ุชุตุฏูุฑ ุงูุฏูุนุงุช ุฅูู PDF/Excel
- [ ] ุฑุจุท ุงูุฏูุนุงุช ุจุงูุนูุงุฌุงุช ุชููุงุฆูุงู
- [ ] ุฅุถุงูุฉ ุชูุจููุงุช ููุฏูุนุงุช ุงููุนููุฉ
- [ ] ุฅุญุตุงุฆูุงุช ูุชูุฏูุฉ (ุฑุณูู ุจูุงููุฉุ ุฅุญุตุงุก ุญุณุจ ุงูุทุฑููุฉุ ุฅูุฎ)

## ๐ ุงูุฏุนู

ุนูุฏ ุญุฏูุซ ูุดุงูู:
1. ุชุญูู ูู ูุฌูุฏ ุฌููุน ุงููุฑุถู ูู ุงููุธุงู
2. ุชุฃูุฏ ูู ุชุซุจูุช ุฌููุน ุงูููุชุจุงุช (`flutter pub get`)
3. ุงูุณุญ ุจูุงูุงุช ุงูุชุทุจูู ูุฃุนุฏ ุงูุชุดุบูู
4. ุชุญูู ูู console ููุฃุฎุทุงุก ุงูุชูุตูููุฉ

## โจ ุงูููุฎุต

ุชู ุชุทููุฑ ุฌุฒุฆูุฉ ุงููุฏููุนุงุช ุจุดูู ูุงูู ูู ุฌุฏูุฏ ูุน:
- โ ูุงุฌูุฉ ูุณุชุฎุฏู ุญุฏูุซุฉ ูุณููุฉ ุงูุงุณุชุฎุฏุงู
- โ ูุธุงู ููุชุฑุฉ ูุชูุฏู
- โ ุนูููุงุช CRUD ูุงููุฉ
- โ ุฃููููุงุช ูุฃููุงู ุฏููุงููููุฉ
- โ ุญููู ูุดุฑูุทุฉ ุฐููุฉ
- โ ุฅุญุตุงุฆูุงุช ูุจุงุดุฑุฉ ูุชุญุฏูุซ ููุฑู
- โ ุญูุธ ุขูู ูู Hive
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ูุงูุชุญูู ูู ุงูุตุญุฉ

---

**ุงูุชุงุฑูุฎ**: `2024`
**ุงูุฅุตุฏุงุฑ**: `1.0`
**ุงูุญุงูุฉ**: โ ููุชูู ูุฌุงูุฒ ููุงุณุชุฎุฏุงู
